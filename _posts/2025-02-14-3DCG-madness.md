---
layout: post
title: "恐怖のCGソフト"
date: 2025-02-14 1:41
category: programming FetutEngine
author: ark231
tags: []
---
最近3D描画エンジンを作っているのだが、そこで意味不明のバグに頭を悩ませている。  
<!-- more -->
非常に基礎的な物体の描画機能は一応実装済みで、現在カメラの移動を実装中である。  
とりあえずキーボードを押している間だけ平行移動・回転をするようなコードを実装して、
平行移動に関しては問題なく動作したのだが、回転を加えると非常に不可解な挙動を示した。
問題のプログラムのスクリーンキャプチャは以下のとおりである。
<object 
    type="video/mp4"
    data="/assets/videos/2025-02-14 01-18-27-3dcg-wtw.mp4"
    width="960"
    height="540"
>
screen capture of the program in question
</object>
動画のとおり、ユーザーが入力をやめて、`dx`,`dtheta`(それぞれそのフレームでの位置、角度の変化量)がすべて0になっても
カメラのトランスフォーム行列が微量ながら変化し続け、最終的に`-nan`になってしまっている。  
しかしながら、カメラの行列をいじっている箇所はユーザーの入力を反映している１箇所のみのはずであるため、
ユーザーの入力がないときはカメラの行列は変化しないはずである。  
リアルタイム性の高いGUIプログラムである上に、問題がどこにあるのか全く見当がつかないため、デバッガを使うのが難しく、
原因が全くわからない状況になっている。  
このままではプログラムが自我を持ってカメラを動かしている:ghost:としか考えられなくなってしまう。
